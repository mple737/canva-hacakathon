<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Accessibility Mode</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        
        background-size: cover;
        background: linear-gradient(to right, #a64d45, #cb7a6f, #b55560); /* Gradient background */
      }

      header {
        width: 100%;
        padding: 20px;
        background: linear-gradient(to right, #a64d45, #cb7a6f, #b55560); /* Gradient background */
        color: white;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: fixed;
        top: 0;
        z-index: 10;
      }
      .container {
        max-width: 600px;
        margin: auto;
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        margin-top: 200px;
      
      }

      h1 {
        font-size: 2em; /* Increased font size */
        margin: 0;
        color: #2d5091; /* Dark blue for welcome text */
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        text-align: center; /* Center text horizontally */
      } 

      .container p {
        margin: 0 0 15px;
        color: #666;
        text-align: center; /* Center text horizontally */
        margin-top: 10px;
      }

      button {
        width: 100%;
        padding: 10px;
        margin: 15px 0; /* Added margin for spacing between buttons */
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }
      button:hover {
        background-color: #0056b3;
      }
      .menu {
        position: absolute;
        top: 30px;
        right: 70px; /* Adjusted to move the button slightly to the left */
        font-size: 18px; /* Increased font size */
        background: #fff;
        color: #e84c3d;
        border: none;
        font-weight: bold;
        border-radius: 5px;
        padding: 11px 18px;
        cursor: pointer;
        text-decoration: none;
      }

      .menu:hover {
        background: #e84c3d;
        color: #fff;
        transform: scale(1.05);
      }

      .menu-content {
        display: none;
        position: absolute;
        top: 80px;
        right: 70px;
        background: #fff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border-radius: 5px;
        z-index: 30;
      }

      .menu-content a {
        display: block;
        padding: 10px;
        color: #323232;
        text-decoration: none;
        font-weight: normal;
      }

      .menu-content a:hover {
        background: #f5f5f5;
      }

      

      .accessibilityButton,
      .colorBlindButton,
      .speakerButton,
      .stopButton {
        padding: 12px 24px;
        font-size: 18px;
        background: linear-gradient(
          to right,
          #007bff,
          #0056b3
        ); /* Gradient blue */
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        margin-top: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        transition: 0.3s, transform 0.3s;
      }
      .accessibilityButton:hover,
      .colorBlindButton:hover,
      .speakerButton:hover,
      .stopButton:hover  {
        background: linear-gradient(
          to right,
          #0056b3,
          #007bff
        ); /* Inverted gradient on hover */
        transform: scale(1.05);
      }
      .accessibilityButton:active,
      .colorBlindButton:active,
      .speakerButton:active,
      .stopButton:active {
        background: #003d7a;
      }


      .font-size-controls {
        display: flex;
        justify-content: space-between;
        margin: 20px 0;
      }

      .spacing {
        margin: 0 10px; /* Horizontal spacing between A+ and A- buttons */
      }


      /* Color blind mode styles */
      .color-blind-mode {
        filter: grayscale(100%) contrast(100%); /* Example filter for color blindness */
      }


    </style>
  </head>
  <body>
    <header>
      <!-- Display the logo -->
      <div class="logo" onclick="location.href='./landing'">
        <img
          src="/static/logo.png"
          alt="AdaptiveStudio Logo"
          style="height: 65px; cursor: pointer"
        />
      </div>

      <div class="menu" id="menu">â˜°</div>
      <div class="menu-content" id="menuContent">
        <a href="./profile">My Profile</a>
        <a href="./emotion_palette_selector">Emotion Palette Selector</a>
        <a href="./accessibility">Real-Time Accessibility Checker</a>
        <a href="./design_element_suggestions">Design Element Suggestions</a>
        <a href="./educational_resources">Educational Resources</a>
        <a href="./accessibility_mode_toggle">Accessibility Mode Toggle</a>
        <a href="./landing">Logout</a>
      </div>
    </header>

    <div class="container">
      <h1>Accessibility Mode</h1>
      <p>Toggle accessibility features for a better experience.</p>

      <!-- Font Size Controls -->
      <div class="font-size-controls">

        <button
        class="accessibilityButton"
        onclick="changeFontSize('decrease')"
        aria-label="Decrease font size"
      >
        A-
      </button>

      <div class="spacing"></div>
       

      <button
          class="accessibilityButton"
          onclick="changeFontSize('increase')"
          aria-label="Increase font size"
        >
          A+
      </button>
        
      </div>

      <button
        class="accessibilityButton"
        id="accessibilityButton"
        onclick="toggleAccessibility()"
        aria-label="Toggle accessibility mode"
      >
        Enable Accessibility Mode
      </button>

      <button
        class="colorBlindButton"
        id="colorBlindButton"
        onclick="toggleColorBlindMode()"
        aria-label="Toggle Color Blind Mode"
      >
        Enable Color Blind Mode
      </button>

      <button
        class="speakerButton"
        id="speakerButton"
        onclick="speakInstructions()"
        aria-label="Listen to instructions"
      >
        ðŸ”Š Listen to Instructions
      </button>
      <button
        class="stopButton"
        id="stopButton"
        onclick="stopInstructions()"
        aria-label="Stop listening"
      >
        âœ– Stop Instructions
      </button>
    </div>
   

    <script>
      const menu = document.getElementById("menu");
      const menuContent = document.getElementById("menuContent");
      const accessibilityButton = document.getElementById(
        "accessibilityButton"
      );
      const toggleAccessibilityButton = document.getElementById(
        "toggleAccessibilityButton"
      );
      const speakerButton = document.getElementById("speakerButton");
      const stopButton = document.getElementById("stopButton");
      const colorBlindButton = document.getElementById("colorBlindButton");

      let isAccessibilityModeEnabled = false;
      let isColorBlindModeEnabled = false; // New variable for color blind mode
      let currentFontSize = 16;
      let utterance; // Variable to store the speech utterance

      menu.addEventListener("click", () => {
        const isExpanded = menu.getAttribute("aria-expanded") === "true";
        menu.setAttribute("aria-expanded", !isExpanded);
        menuContent.style.display = isExpanded ? "none" : "block";
      });

      document.addEventListener("click", (event) => {
        if (
          !menu.contains(event.target) &&
          !menuContent.contains(event.target)
        ) {
          menuContent.style.display = "none";
          menu.setAttribute("aria-expanded", "false");
        }
      });

      toggleAccessibilityButton.addEventListener("click", toggleAccessibility);
      colorBlindButton.addEventListener("click", toggleColorBlindMode); // Add event listener for color blind toggle

      function toggleAccessibility() {
        isAccessibilityModeEnabled = !isAccessibilityModeEnabled;
        if (isAccessibilityModeEnabled) {
          document.body.classList.add("accessibility-mode");
          alert("Accessibility mode enabled!");
          accessibilityButton.textContent = "Disable Accessibility Mode";
          toggleAccessibilityButton.textContent = "Disable Accessibility Mode";
          saveUserPreferences();
        } else {
          document.body.classList.remove("accessibility-mode");
          alert("Accessibility mode disabled!");
          accessibilityButton.textContent = "Enable Accessibility Mode";
          toggleAccessibilityButton.textContent = "Enable Accessibility Mode";
          saveUserPreferences();
        }
      }

      function toggleColorBlindMode() {
        isColorBlindModeEnabled = !isColorBlindModeEnabled;
        if (isColorBlindModeEnabled) {
          document.body.classList.add("color-blind-mode");
          alert("Color Blind mode enabled!");
          colorBlindButton.textContent = "Disable Color Blind Mode";
          saveUserPreferences();
        } else {
          document.body.classList.remove("color-blind-mode");
          alert("Color Blind mode disabled!");
          colorBlindButton.textContent = "Enable Color Blind Mode";
          saveUserPreferences();
        }
      }

      function speakInstructions() {
        const instructions = `
                Welcome to AdaptiveStudio. You can enable accessibility mode by pressing A.
                Adjust font sizes using the A+ button to increase size and A- to decrease size.
                You can listen to these instructions by pressing I.
                Press E to navigate to the Emotion Color Palette page, 
                H for the Homepage, 
                L to log out, 
                C for the Real-Time Accessibility Checker page, 
                D for Design Element Suggestions, 
                and R for Educational Resources.
            `;
        utterance = new SpeechSynthesisUtterance(instructions);
        utterance.rate = 0.7; // Slower speech rate
        window.speechSynthesis.speak(utterance);
      }

      function stopInstructions() {
        window.speechSynthesis.cancel(); // Stop any ongoing speech
      }

      function changeFontSize(action) {
        const body = document.body;
        if (action === "increase" && currentFontSize < 24) {
          currentFontSize += 2;
        } else if (action === "decrease" && currentFontSize > 12) {
          currentFontSize -= 2;
        }
        body.style.fontSize = currentFontSize + "px";
        saveUserPreferences();
      }

      function saveUserPreferences() {
        localStorage.setItem(
          "isAccessibilityModeEnabled",
          isAccessibilityModeEnabled
        );
        localStorage.setItem(
          "isColorBlindModeEnabled",
          isColorBlindModeEnabled
        ); // Save color blind preference
        localStorage.setItem("fontSize", currentFontSize);
      }

      function loadUserPreferences() {
        const isEnabled =
          localStorage.getItem("isAccessibilityModeEnabled") === "true";
        const isColorBlindEnabled =
          localStorage.getItem("isColorBlindModeEnabled") === "true"; // Load color blind preference
        const fontSize = parseInt(localStorage.getItem("fontSize"), 10);

        if (isEnabled) {
          isAccessibilityModeEnabled = true;
          document.body.classList.add("accessibility-mode");
          accessibilityButton.textContent = "Disable Accessibility Mode";
          toggleAccessibilityButton.textContent = "Disable Accessibility Mode";
        }

        if (isColorBlindEnabled) {
          isColorBlindModeEnabled = true;
          document.body.classList.add("color-blind-mode");
          colorBlindButton.textContent = "Disable Color Blind Mode"; // Update button text
        }

        if (fontSize) {
          currentFontSize = fontSize;
          document.body.style.fontSize = currentFontSize + "px";
        }
      }

      window.onload = loadUserPreferences;

      document.querySelectorAll("button").forEach((button) => {
        button.setAttribute("tabindex", "0");
      });

      // Keyboard Navigation
      document.addEventListener("keydown", (event) => {
        switch (event.key) {
          case "a":
          case "A":
            toggleAccessibility();
            break;
          case "i":
          case "I":
            speakInstructions();
            break;
          case "ArrowUp":
            changeFontSize("increase");
            break;
          case "ArrowDown":
            changeFontSize("decrease");
            break;
          case "e":
          case "E":
            window.location.href = "/emotion_palette_selector"; // Navigate to emotion color palette page
            break;
          case "h":
          case "H":
            window.location.href = "/"; // Navigate to homepage
            break;
          case "l":
          case "L":
            window.location.href = "/logout"; // Navigate to logout
            break;
          case "c":
          case "C":
            window.location.href = "/real_time_accesiblity_checker"; // Navigate to real-time accessibility checker page
            break;
          case "d":
          case "D":
            window.location.href = "/design_element_suggestions"; // Navigate to design element suggestions page
            break;
          case "r":
          case "R":
            window.location.href = "/educational_resources"; // Navigate to educational resources page
            break;
          default:
            break;
        }
      });
    </script>
  </body>
</html>
